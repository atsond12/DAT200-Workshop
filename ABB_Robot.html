<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="./favicon.ico" />
    <title>ABB Robot</title>

    <style>
      body {
        margin: 0;
        overflow: hidden;
      }
    </style>

    <!-- Import map: map the bare specifier "three" to the local module build. -->
    <script type="importmap">
      {
        "imports": {
          "three": "./lib/three.js-master/build/three.module.js",
          "OrbitControls": "./lib/three.js-master/examples/jsm/controls/OrbitControls.js",
          "dat.GUI": "./lib/dat.gui/dat.gui.module.js",
          "Stats": "./lib/three.js-master/examples/jsm/libs/stats.module.js",
          "GLTFLoader": "./lib/three.js-master/examples/jsm/loaders/GLTFLoader.js"
        }
      }
    </script>
  </head>
  <body>
  <script type="module" defer>
      import { world } from "./simpleWorld.js";
      import * as THREE from "three";
      import { GLTFLoader } from "GLTFLoader";

      //----- Functions -----------------------------------------

      function ABBModelOnLoad(aGLTF){
        console.log("ABB model loading . . ." + aGLTF.toString());
        const abbRobot = aGLTF.scene;
        abbRobot.scale.set(10,10,10);
        world.scene.add(abbRobot);
      }

      function addSpotLight(){
        const light = new THREE.SpotLight("#FFFFFF", 10);
        light.position.set(2, 25, 2);

        const target = new THREE.Object3D();
        target.position.set(0, 0, 0);
        world.scene.add(target);
        light.target = target;
        world.scene.add(light);
        const helper = new THREE.SpotLightHelper(light);
        world.scene.add(helper);

      }

      //----- Main Code ------------------------------------------
      const loader = new GLTFLoader();
      
      addSpotLight();
      loader.load("./models/robot/ABB_Robot_01.gltf", ABBModelOnLoad)

      document.body.appendChild(world.renderer.domElement);
    </script>
  </body>
</html>
